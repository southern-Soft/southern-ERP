# ==============================================================================
# SOUTHERN ERP - Environment Variables Template
# ==============================================================================
# 
# INSTRUCTIONS FOR DEPLOYMENT:
# 1. Copy this file to .env: cp env.example .env
# 2. Fill in the actual values (especially passwords and secrets)
# 3. NEVER commit .env to git (it contains secrets)
# 4. This env.example file IS safe to commit (no real secrets)
#
# This .env file is used by docker-compose.yml in the root directory
# ==============================================================================

# ==============================================================================
# DOCKER COMPOSE PROJECT NAME
# ==============================================================================
COMPOSE_PROJECT_NAME=erp

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL User (default: postgres)
POSTGRES_USER=postgres

# PostgreSQL Password (REQUIRED - Set a strong password!)
# Generate a secure password: openssl rand -base64 32
POSTGRES_PASSWORD=your_secure_password_here

# PostgreSQL Port (default: 5432)
POSTGRES_PORT=5432

# Database Hosts (for Docker Compose, these are service names)
# For production, use actual hostnames or IPs if not using Docker networking
POSTGRES_HOST_CLIENTS=db-clients
POSTGRES_HOST_SAMPLES=db-samples
POSTGRES_HOST_USERS=db-users
POSTGRES_HOST_ORDERS=db-orders
POSTGRES_HOST_MERCHANDISER=db-merchandiser
POSTGRES_HOST_SETTINGS=db-settings

# Database Names (defaults shown - change if needed)
POSTGRES_DB_CLIENTS=rmg_erp_clients
POSTGRES_DB_SAMPLES=rmg_erp_samples
POSTGRES_DB_USERS=rmg_erp_users
POSTGRES_DB_ORDERS=rmg_erp_orders
POSTGRES_DB_MERCHANDISER=rmg_erp_merchandiser
POSTGRES_DB_SETTINGS=rmg_erp_settings

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================

# Redis Host (default: redis)
REDIS_HOST=redis

# Redis Port (default: 6379)
REDIS_PORT=6379

# Redis Database Number (default: 0)
REDIS_DB=0

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================

# JWT Secret Key (REQUIRED - Generate a secure key!)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Or: openssl rand -hex 32
SECRET_KEY=your-secret-key-generate-with-secrets-token-urlsafe-32

# JWT Algorithm (default: HS256)
ALGORITHM=HS256

# JWT Token Expiration (in minutes)
# Default: 10080 (7 days)
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ==============================================================================
# CORS CONFIGURATION (CRITICAL FOR PROXMOX DEPLOYMENT!)
# ==============================================================================

# CORS Origins (REQUIRED for production!)
# For development: *
# For production: comma-separated list of allowed origins
# 
# IMPORTANT: Set this to your actual frontend URL on Proxmox server!
# If accessing via IP: http://YOUR_SERVER_IP:2222
# If accessing via domain: https://your-domain.com,http://your-domain.com
# 
# Example for Proxmox (replace YOUR_IP with actual server IP):
# CORS_ORIGINS=http://192.168.1.100:2222
CORS_ORIGINS=*

# ==============================================================================
# PORT CONFIGURATION
# ==============================================================================

# Backend Port (default: 8000)
# External port:internal port
BACKEND_PORT=8000

# Frontend Port (default: 2222)
# External port:internal port (internal is always 3000 for Next.js)
FRONTEND_PORT=2222

# Database Samples Port (optional, for external access)
DB_SAMPLES_PORT=5433

# ==============================================================================
# DATABASE CONNECTION POOL SETTINGS (Optional - defaults shown)
# ==============================================================================

# Connection Pool Size (default: 10)
POOL_SIZE=10

# Max Overflow Connections (default: 10)
MAX_OVERFLOW=10

# ==============================================================================
# ENVIRONMENT MODE
# ==============================================================================

# Environment Mode
# Options: development, production
ENVIRONMENT=production

# ==============================================================================
# FRONTEND CONFIGURATION (Optional)
# ==============================================================================

# Backend URL for server-side rendering (uses Docker service name)
# Don't change unless you have a specific reason
BACKEND_URL=http://backend:8000
API_URL=http://backend:8000

# Public API URL for client-side (uses API masking)
# Don't change unless you have a specific reason
NEXT_PUBLIC_API_MASK_URL=/api/v1

# ==============================================================================
# NOTES FOR PROXMOX DEPLOYMENT
# ==============================================================================
#
# 1. SECURITY:
#    - Use strong, unique passwords for POSTGRES_PASSWORD
#    - Generate a secure SECRET_KEY (never use the example value!)
#    - Set CORS_ORIGINS to your actual frontend URL (not "*" in production!)
#    - Set ENVIRONMENT=production
#
# 2. CORS SETUP (MOST COMMON ISSUE - "Failed to load data"):
#    - Find your server IP: hostname -I
#    - Your frontend port is: 2222 (from FRONTEND_PORT)
#    - Set CORS_ORIGINS=http://YOUR_IP:2222
#    - Example: CORS_ORIGINS=http://192.168.1.100:2222
#    - After changing, restart: docker compose restart backend
#
# 3. DATABASE:
#    - Database hosts use Docker service names (db-clients, etc.)
#    - This works automatically in Docker Compose
#    - Don't change unless you have a specific reason
#
# 4. DEPLOYMENT STEPS:
#    - Copy this file: cp env.example .env
#    - Edit .env with your actual values
#    - The .env file is in .gitignore (never commit it!)
#    - This env.example file is safe to commit (no secrets)
#    - Start services: docker compose up -d --build
#
# 5. TROUBLESHOOTING:
#    - If "failed to load data" errors: Check CORS_ORIGINS matches your frontend URL
#    - If database errors: Check POSTGRES_PASSWORD matches
#    - If connection errors: Check all containers are running: docker compose ps
#    - Check logs: docker compose logs backend
#    - Verify CORS: docker compose exec backend env | grep CORS_ORIGINS
#
# ==============================================================================
